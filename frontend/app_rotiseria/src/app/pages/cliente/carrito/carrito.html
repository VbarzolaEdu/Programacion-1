<app-nav-cliente></app-nav-cliente>
<div class="app-header">Carrito</div>

<div class="container my-3" *ngIf="items.length > 0; else vacio">
  <ul class="list-group">
    <li
      class="list-group-item d-flex align-items-center justify-content-between"
      *ngFor="let i of items"
    >
      <!-- Info del producto -->
      <div class="d-flex align-items-center gap-3">
        <img
          [src]="i.imagen || 'assets/placeholder.jpg'"
          alt="{{ i.nombre }}"
          class="producto-img"
          style="width: 60px; height: 60px; border-radius: 10px; object-fit: cover;"
        />
        <div>
          <div class="fw-bold">{{ i.nombre }}</div>
          <small class="text-muted">${{ i.precio }}</small>
        </div>
      </div>

      <!-- Controles -->
      <div class="qty d-flex align-items-center gap-2">
        <button class="btn btn-outline-secondary btn-sm" (click)="restar(i)">‚àí</button>
        <span class="fw-bold">{{ i.cantidad }}</span>
        <button class="btn btn-outline-secondary btn-sm" (click)="sumar(i)">Ôºã</button>

        <!-- Editar pedido -->
        <button class="btn btn-sm btn-warning" (click)="editar(i)">‚úèÔ∏è</button>

        <!-- Eliminar -->
        <button class="btn btn-sm btn-danger" (click)="eliminar(i.id)">üóë</button>
      </div>
    </li>
  </ul>

  <!-- Totales -->
  <div class="totales mt-3 p-3 rounded" style="background: #f6e3d8;">
    <div class="d-flex justify-content-between">
      <span>Subtotal</span>
      <span>${{ total() }}</span>
    </div>

    <div class="d-flex justify-content-between">
      <span>Env√≠o</span>
      <span>$0</span>
    </div>

    <hr />

    <div class="d-flex justify-content-between fw-bold">
      <span>Total</span>
      <span>${{ total() }}</span>
    </div>

    <button class="btn btn-success w-100 mt-3" (click)="confirmar()">
      Confirmar pedido
    </button>
  </div>
</div>

<!-- Estado vac√≠o -->
<ng-template #vacio>
  <div class="text-center mt-5 text-muted">
    Tu carrito est√° vac√≠o
  </div>
</ng-template>
